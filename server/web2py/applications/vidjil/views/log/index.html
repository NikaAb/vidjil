{{extend 'db_layout.html'}}
{{import vidjil_utils}}

<h3></h3>

<div id="block_left">
    table:
    {{=SELECT(*[OPTION(elem) for elem in ['all', 'patient', 'run']], _id="table_selector", _name="table", _onchange="db.call('log/index', {'table': this.value})", value=stable)}}
    id:
    {{=SELECT(*[OPTION(id) for id in ([0] + id_list)], _id="id_selector", _name="id", _onchange="db.call('log/index', {'table': $('#table_selector').val(), 'id': this.value})", value=sid)}}
</div>
<div id="db_table_container">
    <table class="db_table" id="table">
        <thead>
            <tr>
            <td class='column_100 pointer'>user</td>
            <td class='column_100 pointer'>table</td>
            <td class='column_100 pointer'>message</td>
            <td class='column_100 pointer'>record</td>
            <td class='column_100 pointer'>created</td>
            </tr>
        </thead>
        {{ for row in query: }}
        <tr>
            <td>{{=row.user_id}}</td>
            <td>{{=row.table_name}}</td>
            <td>{{=row.msg}}</td>
            <td>{{=row.record_id}}</td>
            <td>{{=row.created}}</td>
        </tr>
        {{ pass }}
    </table>
    <table class="db_table" id="db_fixed_header"></table>
</div>
