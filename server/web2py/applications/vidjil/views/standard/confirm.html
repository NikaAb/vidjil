{{extend 'db_layout.html'}}

{{('message' in globals())}}
{{if 'message' in globals():}}

{{
data_count=0
query = db( (db.config.standard_id==request.vars["id"])).select() 
for row in query :}}
    {{data_count += db(db.data_file.config_id == row.id).count()}}
{{pass}}


<div>
    <h3>{{=message}}</h3>
    
    Are you sure you want to delete this standard file?</br>
    All config using this standard will also be deleted ({{=db(db.config.standard_id==request.vars["id"]).count()}} config(s) will be deleted).</br>
    All data file using this standard will also be deleted ({{=data_count}} data file(s) will be deleted).</br>

    <div class="center"> 
        <button onclick="db.call('standard/index')">back</button>
        <button onclick="db.call('standard/delete', {'id' :'{{=request.vars["id"]}}'} )">continue</button>
    </div>
</div>
    
{{elif 'content' in globals():}}
{{=content}}
{{else:}}
{{=BEAUTIFY(response._vars)}}
{{pass}}
